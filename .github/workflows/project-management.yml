name: Project Management Automation

on:
  issues:
    types: [opened, closed, reopened]
  pull_request:
    types: [opened, closed, merged, reopened]

permissions:
  issues: write
  pull-requests: write
  contents: read

jobs:
  manage-project:
    runs-on: ubuntu-latest
    steps:
      - name: Add issue to project
        if: github.event_name == 'issues' && github.event.action == 'opened'
        uses: actions/add-to-project@v0.5.0
        with:
          project-url: https://github.com/users/Kyona776/projects/6
          github-token: ${{ secrets.PROJECT_TOKEN }}

      - name: Add PR to project
        if: github.event_name == 'pull_request' && github.event.action == 'opened'
        uses: actions/add-to-project@v0.5.0
        with:
          project-url: https://github.com/users/Kyona776/projects/6
          github-token: ${{ secrets.PROJECT_TOKEN }}

      - name: Move to In Progress when PR is opened
        if: github.event_name == 'pull_request' && github.event.action == 'opened'
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.PROJECT_TOKEN }}
          script: |
            // Logic to move item to "In Progress" column would go here
            console.log('PR opened, should move to In Progress');

      - name: Move to Done when issue is closed
        if: github.event_name == 'issues' && github.event.action == 'closed'
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.PROJECT_TOKEN }}
          script: |
            // Logic to move item to "Done" column would go here
            console.log('Issue closed, should move to Done');